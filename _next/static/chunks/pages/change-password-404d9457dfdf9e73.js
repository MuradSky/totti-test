(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{63529:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/change-password",function(){return n(85177)}])},72550:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(85893),s=n(67294),a=n(96202),i=n.n(a);let o=t=>{let{marginBottom:e,marginTop:n,className:s,colRef:a,children:o}=t;return(0,r.jsx)("div",{ref:a,style:{marginBottom:"number"==typeof e?"".concat(e,"px"):null,marginTop:n?"".concat(n,"px"):null},className:"".concat(i().col," ").concat(s||""),children:o})};var c=s.memo(o)},64126:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r=n(85893),s=n(67294),a={src:"/_next/static/media/showInput.7fa294ed.svg",height:20,width:20,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/hiddenInput.7c651a39.svg",height:20,width:20,blurWidth:0,blurHeight:0},o={src:"/_next/static/media/pencil.8218d8be.svg",height:20,width:20,blurWidth:0,blurHeight:0},c=n(11702),u=n.n(c),l=n(25675),d=n.n(l);let h=t=>{let{refInput:e,value:n,placeholder:c,label:l,type:h,id:p,isError:_,errorText:m,className:g,readonly:x,onChange:f}=t,[S,b]=s.useState(!1),[w,v]=s.useState(x),j=s.useRef(null),k=()=>{b(!S)},y=()=>{v(!w),x&&j.current&&(j.current.readOnly?(j.current.readOnly=!1,j.current.focus()):(j.current.readOnly=!0,j.current.blur()))};return s.useEffect(()=>{v(x)},[x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:e,className:"".concat(u().inputBlock," ").concat(_?u().isError:""," ").concat(g||""),children:[(0,r.jsx)("input",{ref:j,autoComplete:"off",className:"".concat(u().input," ").concat(x?"":u().inputWithoutPencil," ").concat(w?"":u().inputWithPencil),value:n,id:p,placeholder:c,readOnly:x,type:"password"===h&&S?"text":h,onChange:f}),"password"===h&&n&&(0,r.jsx)(d(),{alt:"show",src:S?i:a,width:20,height:20,onClick:k,style:{maxWidth:"100%",height:"auto"}}),x&&n&&(0,r.jsx)(d(),{alt:"pencil",src:o,width:20,height:20,onClick:y,style:{maxWidth:"100%",height:"auto"}})]}),l&&(0,r.jsx)("p",{className:u().label,children:l}),_&&m&&(0,r.jsx)("p",{className:u().errorText,children:m})]})};var p=s.memo(h)},60123:function(t,e,n){"use strict";n.d(e,{Z:function(){return r.Z}});var r=n(64126)},5997:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var r=n(85893),s=n(82462),a=n.n(s),i=n(67294),o=n(29238),c=n.n(o),u=n(18416),l=n.n(u);let d=t=>{let{id:e,size:n,text:s,withDot:i,withSuisse:o,className:u,count:d,marginBottom:h,children:p}=t;return(0,r.jsxs)("h1",{style:n?{fontSize:"".concat(n,"px"),marginBottom:Number.isInteger(h)?"".concat(h,"px"):null}:{marginBottom:Number.isInteger(h)?"".concat(h,"px"):null},id:e,className:"".concat(l().title," ").concat(u||""," ").concat(o?a().className:""),children:[i?"\xb7 ":"",p||s,(0,r.jsx)("sup",{className:"".concat(l().sub," ").concat(n<=40?l().miniSub:n>70?l().bigSub:""),dangerouslySetInnerHTML:null!=d?{__html:c().sanitize("&nbsp;(".concat(1===d.toString().length?"0"+d.toString():d,")"))}:{__html:""}})]})};var h=i.memo(d)},65721:function(t,e,n){"use strict";n.d(e,{i:function(){return u}});var r=n(67294),s=n(9473),a=n(91374),i=n(44965),o=n(76548),c=n(55995);let u=()=>{let t=(0,c.Z)(),e=(0,s.v9)(t=>t.userData.token);r.useEffect(()=>{let n=localStorage.getItem("token");n&&!e?t((0,o.is)({token:n})).then(r=>{let{data:s}=r.payload;s.message?localStorage.removeItem("token"):(e||t((0,o.pM)(n)),t((0,i.hz)({token:n})),t((0,a.G4)({token:n})))}):(t((0,i.hz)({token:null})),t((0,a.G4)({token:n})))},[])}},85177:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSP:function(){return Z},default:function(){return W}});var r=n(85893),s=n(16572),a=n(31913),i=n(34262),o=n(35248),c=n(56030),u=n(72550),l=n(34462),d=n(60123),h=n(5997),p=n(64278),_=n(11163),m=n(67294),g=n(9473),x=n(88292),f=n.n(x),S=n(71239),b=n(76548),w=n(44965),v=n(91374);let j=new class{async getRestore(t){let e=await this._apiStore.request({method:o.I.POST,endpoint:"/api/v1/auth/restore",headers:{accept:"application/json","Content-Type":"application/json"},data:t});try{return{success:e.success,data:e.data,status:e.status}}catch(t){return{success:e.success,data:e.data,status:e.status}}}constructor(){this._apiStore=i.Z.apiStore}},k=()=>{let[t,e]=m.useState(""),[n,s]=m.useState(""),[a,i]=m.useState(!1),[o,x]=m.useState(!1),[k,y]=m.useState(""),[I,C]=m.useState(""),[T,E]=m.useState(""),[N,Z]=m.useState(!0),W=(0,g.v9)(t=>t.isMobile.isMobile),O=(0,_.useRouter)(),P=(0,S.Z)(),R=t=>{e(t.target.value),i(!1)},B=t=>{s(t.target.value),x(!1)},H=()=>{if(t!==n){i(!0),x(!0),y("Пароли не совпадают");return}if(t.length<8){i(!0),y("Пароль должен быть более 8 символов");return}Z(!1),j.getRestore({email:T,checkWord:I,password:t,passwordConfirmation:n}).then(e=>{e.data.errors?(Z(!0),e.data.errors.password&&(i(!0),y(e.data.errors.password[0])),e.data.errors.passwordConfirmation&&(x(!0),y(e.data.errors.passwordConfirmation[0]))):"ok"===e.data.message&&P((0,b.vM)({email:T,password:t,rememberMe:!0})).then(t=>{let{data:e}=t.payload;Z(!0),e.token&&(localStorage.setItem("token",e.token),P((0,b.is)({token:e.token})).then(()=>{O.push(p.Z.home+p.Z.lk),P((0,w.hz)({token:localStorage.getItem("token")})),P((0,v.G4)({token:localStorage.getItem("token")}))}))})})};return m.useEffect(()=>{O.query.USER_CHECKWORD&&C(O.query.USER_CHECKWORD),O.query.USER_LOGIN&&E(O.query.USER_LOGIN)},[O.query]),(0,r.jsx)(l.Z,{className:f().content,children:(0,r.jsx)(u.Z,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{text:"Восстановление пароля",size:W?22:28,marginBottom:W?32:40,withSuisse:!0}),(0,r.jsx)(d.Z,{value:t,placeholder:"Новый пароль",type:"password",errorText:k,isError:a,onChange:R}),(0,r.jsx)(d.Z,{value:n,placeholder:"Повторите новый пароль",type:"password",errorText:k,isError:o,onChange:B}),(0,r.jsx)(c.Z,{onClick:H,isActive:!0,isInvisible:!0,text:"Сохранить пароль",disabled:!N})]})})})};var y=n(55995),I=n(65721),C=n(9008),T=n.n(C),E=n(36621);let N=t=>{let{data:e}=t,n=(0,y.Z)();return(0,I.i)(),n((0,E.v)(e.isMobile)),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T(),{children:(0,r.jsx)("meta",{name:"description",content:"TOTTI I Базовая одежда, отражающая характер. Одежда и аксессуары для женщин, детей и мужчин. Актуальность, комфорт и качество."})}),(0,r.jsx)(a.Z,{}),(0,r.jsx)(k,{}),(0,r.jsx)(s.Z,{withDarkBGC:!0})]})};var Z=!0,W=N},96202:function(t){t.exports={col:"Col_col__arJeD"}},11702:function(t){t.exports={inputBlock:"Input_inputBlock__3OtH7",input:"Input_input__T9Jrg",inputWithoutPencil:"Input_inputWithoutPencil__9tDjy",inputWithPencil:"Input_inputWithPencil__SReHd",isError:"Input_isError__Fi_uC",errorText:"Input_errorText__i0TKY",label:"Input_label__8juoF"}},18416:function(t){t.exports={title:"Title_title__c26zI",sub:"Title_sub__wt02d",miniSub:"Title_miniSub__JyiY8",bigSub:"Title_bigSub__s_ou_"}},88292:function(t){t.exports={content:"ChangePassword_content__sQ8xG"}}},function(t){t.O(0,[238,146,774,888,179],function(){return t(t.s=63529)}),_N_E=t.O()}]);